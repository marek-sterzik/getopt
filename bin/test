#!/usr/bin/env php
<?php

namespace SPSOstrov\GetOpt;

require_once dirname(__DIR__) . "/vendor/autoload.php";

array_shift($argv);

$options = [
    'a|append              append commit',
    'm|message:            [=msg]commit message',
    'o|optional?           [=opt]optional argument',
    'A|array*              [=arr]array argument',
    'yes|no{1}[enabled=@]  enable[yes]yes, it should be enabled[no|@@@]no, it should be disabled \\[hahaha\\]',
    '$command:             command',
    '$args{3}              command-args',
];


$options = new Options($options);
$options->setStrictMode(true);

echo $options->getHelpFormatted();

try {
    $parsed = $options->parseArgs($argv);
    echo "----------------------------------------\n";
    var_dump($parsed);
} catch (\Exception $e) {
    echo "Error: " . $e->getMessage() . "\n";
}
